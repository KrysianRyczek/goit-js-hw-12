{"version":3,"file":"search-image-2edc44e3.js","sources":["../../src/js/search-image.js"],"sourcesContent":["// Opisany w dokumentacji\nimport SimpleLightbox from \"simplelightbox\";\nimport iziToast from \"izitoast\"; \nimport axios from \"axios\"; \n// Opcjonalny import stylÃ³w\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\"#search-image-form\")\n\nclass URL {\n    \n    constructor(q) {\n      this.param.q = q;\n    }\n\n    param = {\n        q:\"\",\n        key: \"44950793-df63a62bcd1fce85415b89ba5\",\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        url: \"https://pixabay.com/api/\",\n        pageindex: 1,\n        limit: 40,\n        totalHits:0,\n    }\n    set pageNumber(newPageIndex) {\n        this.param.pageindex =newPageIndex\n      }\n      set maxHits(currenttotalHits) {\n        this.param.totalHits =currenttotalHits\n      }\n    get hits(){\n        return this.param.totalHits\n    }\n    get limit(){\n        return this.param.limit\n    }\n    get addres() {\n        return this.param.url+\"?key=\"+this.param.key+\"&q=\"+this.param.q+\"&image_type=\"\n                +this.param.image_type+\"&orientation=\"+this.param.orientation\n                +\"&safesearch=\"+this.param.safesearch+\"&page=\"+this.param.pageindex+\"&per_page=\"+this.param.limit;\n      }\n}\n\nconst createImage = ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads, ...otherProps })=>{\n    const li= document.createElement(\"li\")\n    li.classList.add(\"gallery-item\")\n    li.innerHTML=\n        `<a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img \n                class=\"gallery-image\" \n                src=\"${webformatURL}\" \n                alt=\"${tags}\"\n                titel=\"oooo\" \n            />\n            <div class=\"box\">\n                <div class=\"box-item\">\n                    <h3>Likes</h3>\n                    <p id=\"likes\">${likes}</p>\n                </div>\n                <div class=\"box-item\">\n                    <h3>Views</h3>\n                    <p id=\"views\">${views}</p>\n                </div>\n                <div class=\"box-item\">\n                    <h3>Comments</h3>\n                    <p id=\"comments\">${comments}</p>\n                </div>\n                <div class=\"box-item\">\n                    <h3>Downloads</h3>\n                    <p id=\"downloads\">${downloads}</p>\n                </div>\n            </div>\n        </a>`\n    return li\n}\nconst initImages = (images) => {\n    const imgs = images.map(createImage);\n    const fragment = document.createDocumentFragment();\n    fragment.append(...imgs)\n    return fragment\n}\n\nconst main = (root, images) =>{\n    const galleryRoot = document.querySelector(root)\n    galleryRoot.appendChild(initImages(images))                                                \n}\nconst createBtnNext = (root) =>{\n    const galleryRoot = document.querySelector(root)\n    galleryRoot.insertAdjacentHTML(\"afterend\", `<div class=\"btnBox\">\n                                                <button id=\"btnNext\" class=\"btnNext\"><< Loade Next Image >></button>\n                                                </div>`\n                                                )                                              \n}\n\nconst galleryImage = async (url) => {\n    const response = await axios.get(url.addres);\n    return response.data;\n};\n\nconst lightbox = new SimpleLightbox('ul.gallery>li>a', { \n    captions: true,\n    captionType: \"attr\",\n    captionsData:\"alt\",\n    captionPosition: 'bottom',\n    captionDelay: 250,\n    overlay: true,\n });\n\n//form.addEventListener(\"submit\", event => {\n    let newPageIndex;\n    let url;\n    let elem;\n    let rect;\n\nwindow.addEventListener(\"click\", event => {\n    if (event.target.id===\"submit\" || event.target.id===\"btnNext\"){\n        event.preventDefault();\n\n        if (event.target.id===\"submit\" & form.querySelector(\"#img\").value.trim() === \"\") {\n            if (document.querySelector(\"#mesage\") === null) \n                form.insertAdjacentHTML(\"afterend\", \n                                        `<p id=\"mesage\" class=\"message\">Form field must be filled in!</p>`);\n            return\n        }\n        if (event.target.id===\"submit\") {\n            newPageIndex=1\n            url = new URL(form.querySelector(\"#img\").value.trim(), newPageIndex)\n        }\n        if (document.querySelector(\"#mesage\") !== null) \n            document.querySelector(\"#mesage\").remove();\n\n        if (event.target.id===\"btnNext\"){\n            newPageIndex=newPageIndex+1\n            url.pageNumber = newPageIndex\n            \n            if(document.querySelectorAll(\"#gallery>li\").length + url.limit > url.hits) {\n                return iziToast.warning({\n                    close: false,\n                    position:'topCenter',\n                    progressBar: false,\n                    backgroundColor: 'lightblue',\n                    messageColor: 'white',\n                    timeout: 5000,\n                    message:\"Sorry, there are no images matching your search query. Please try again!\",\n                    transitionOut:'fadeOutUp',\n                    })\n            }\n        }\n            \n        if (event.target.id===\"submit\" & document.querySelector(\"#gallery\").hasChildNodes()) {\n            const childs = document.querySelectorAll(\"#gallery > li\");\n            childs.forEach(child => child.remove());\n            document.querySelector(\"#btnNext\").remove();\n        }\n        \n        const loader = document.querySelector(\"#loader\")\n        loader.classList.add(\"loader\")\n        \n        if (event.target.id===\"btnNext\"){\n            elem = document.querySelector(\"#btnNext\");\n            rect = elem.getBoundingClientRect().y - 40;\n        }   \n\n       \n        galleryImage(url)\n                .then(\n                    image => {\n                            loader.classList.remove(\"loader\")\n                            if (image.total===0) return iziToast.error({\n                                                                    close: false,\n                                                                    position:'topCenter',\n                                                                    progressBar: false,\n                                                                    backgroundColor: 'red',\n                                                                    messageColor: 'white',\n                                                                    timeout: 5000,\n                                                                    message:\"Sorry, there are no images matching your search query. Please try again!\",\n                                                                    transitionOut:'fadeOutUp',\n                                                                    })\n\n\n\n\n                                                                    \n                            main(\"ul.gallery\",image.hits)\n                            lightbox.refresh()\n                            const btn=  document.querySelector(\"#btnNext\") \n                            if (btn== null) createBtnNext(\"ul.gallery\")\n                            if (event.target.id===\"submit\"){\n                                form.reset();\n                                url.maxHits = image.totalHits\n                                elem = document.querySelector(\"#gallery\");\n                                rect = elem.getBoundingClientRect().y -20;\n                            } \n\n                            window.scrollBy({\n                                top:rect,\n                                behavior: \"smooth\",\n                            });\n\n\n\n                             \n                })\n            .catch(error => {\n                                loader.classList.remove(\"loader\")\n                                console.log(error)\n                            });   \n    }\n\n\n    // if (event.target.id===\"btnNext\"){\n    //     newPageIndex=newPageIndex+1\n\n    //     const url = new URL(imgTitle)\n    //     url.pageNumber = newPageIndex\n    //     console.log(url)\n    //     galleryImage(url)\n    //     .then(\n    //         image => {\n    //                 main(\"ul.gallery\",image.hits)\n                    \n    //             //     const lightbox = new SimpleLightbox('ul.gallery>li>a', { \n    //             //      captions: true,\n    //             //      captionType: \"attr\",\n    //             //      captionsData:\"alt\",\n    //             //      captionPosition: 'bottom',\n    //             //      captionDelay: 250,\n    //             //      overlay: true,\n    //             //   });\n    //               galleryImage.lightbox.refresh() \n\n    //     })\n    //   .catch(error => {\n    //                     console.log(error)\n    //                   })}\n\n\n\n\n\n    // })\n    // window.addEventListener(\"hover\", event => {\n\n    \n\n    // // if(event.target.id===\"gallery\"){\n    // //                     console.log(\"dupa\")\n    // //                     const lightbox = new SimpleLightbox('ul.gallery>li>a', { \n    // //                         captions: true,\n    // //                         captionType: \"attr\",\n    // //                         captionsData:\"alt\",\n    // //                         captionPosition: 'bottom',\n    // //                         captionDelay: 250,\n    // //                         overlay: true,\n    // //                     });\n    // //                     lightbox.refresh()\n    // //                 }\n\n    })"],"names":["form","URL","q","__publicField","newPageIndex","currenttotalHits","createImage","webformatURL","largeImageURL","tags","likes","views","comments","downloads","otherProps","li","initImages","images","imgs","fragment","main","root","createBtnNext","galleryImage","url","axios","lightbox","SimpleLightbox","elem","rect","event","iziToast","child","loader","image","error"],"mappings":"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"}